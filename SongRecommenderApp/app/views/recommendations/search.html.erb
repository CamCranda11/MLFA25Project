<div class="main-container">
  <h1>Cameron's Song Recommendation Tool</h1>
  <p class="subtitle">Search by Song Name and/or Artist Name</p>

  <%= form_with url: recommendations_search_path, method: :get, local: true, class: "search-form" do |form| %>
    <div class="input-group">
      <%= form.text_field :song_name, placeholder: "Enter Song Name..." %>
    </div>
    <div class="input-group">
      <%= form.text_field :artist_name, placeholder: "Enter Artist Name..." %>
    </div>
    <%= form.submit "Find Matches" %>
  <% end %>

  <% flash.each do |type, message| %>
    <div style="background-color: #f8d7da; color: #721c24; padding: 10px; border-radius: 5px; margin-bottom: 20px; border: 1px solid #f5c6cb;">
      <%= message %>
    </div>
  <% end %>

  <% if @matches.present? %>
    <h2>Select Your Song</h2>
    <table class="styled-table">
      <thead>
        <tr>
          <th>Song</th>
          <th>Artist</th>
          <th>Genre</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <% @matches.each do |song| %>
          <tr>
            <td><%= song['track_name'] %></td>
            <td><%= song['artist_name'] %></td>
            <td><%= song['genre'] %></td>
            <td>
              <%= link_to "Get Recommendations", 
                  recommendations_search_path(selected_song_name: song['track_name'], selected_artist_name: song['artist_name']), 
                  class: "action-btn" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% end %>

  <% if @recommendations.present? %>
    <h2>Recommended Songs</h2>
    <table class="styled-table">
      <thead>
        <tr style="background-color: #2980b9;"> 
          <th>Song Name</th>
          <th>Artist</th>
          <th>Genre</th>
        </tr>
      </thead>
      <tbody>
        <% @recommendations.each do |song| %>
          <tr>
            <td><%= song['track_name'] %></td>
            <td><%= song['artist_name'] %></td>
            <td><%= song['genre'] %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
    
    <div style="margin-top: 30px; text-align: center;">
      <%= link_to "Search Again", root_path, class: "action-btn", style: "background-color: #6c757d;" %>
    </div>
  <% end %>
</div>
